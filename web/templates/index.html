<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QRL Trading Bot Dashboard</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { 
      font-family: 'Courier New', monospace; 
      background: #0a0a0a; 
      color: #00ff00; 
      padding: 20px;
      line-height: 1.6;
    }
    .container { max-width: 1200px; margin: 0 auto; }
    
    h1 { 
      font-size: 24px; 
      margin-bottom: 20px; 
      border-bottom: 2px solid #00ff00;
      padding-bottom: 10px;
    }
    
    .grid { 
      display: grid; 
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); 
      gap: 20px; 
      margin-bottom: 20px;
    }
    
    .card { 
      background: #1a1a1a; 
      border: 1px solid #00ff00; 
      border-radius: 4px;
      padding: 15px;
    }
    
    .card-title { 
      font-size: 14px; 
      color: #00ff00; 
      margin-bottom: 12px; 
      opacity: 0.7;
      text-transform: uppercase;
    }
    
    .card-value { 
      font-size: 20px; 
      margin-bottom: 8px;
      font-weight: bold;
    }
    
    .card-label { 
      font-size: 12px; 
      color: #00ff00; 
      opacity: 0.6;
      margin-bottom: 5px;
    }
    
    .card-item { margin-bottom: 10px; }
    
    .status-good { color: #00ff00; }
    .status-warning { color: #ffff00; }
    .status-bad { color: #ff0000; }
    
    .signal-box {
      padding: 8px 12px;
      border-radius: 4px;
      display: inline-block;
      font-weight: bold;
      margin-top: 5px;
    }
    
    .signal-buy { background: #003300; color: #00ff00; border: 1px solid #00ff00; }
    .signal-hold { background: #333300; color: #ffff00; border: 1px solid #ffff00; }
    
    .progress-bar {
      background: #333;
      height: 20px;
      border-radius: 10px;
      overflow: hidden;
      margin-top: 5px;
    }
    
    .progress-fill {
      background: linear-gradient(90deg, #00ff00, #00aa00);
      height: 100%;
      transition: width 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      color: #000;
      font-weight: bold;
    }
    
    .footer { 
      text-align: center; 
      margin-top: 30px; 
      padding-top: 20px;
      border-top: 1px solid #00ff00;
      font-size: 12px; 
      opacity: 0.6;
    }
    
    .refresh-btn {
      background: #003300;
      color: #00ff00;
      border: 1px solid #00ff00;
      padding: 10px 20px;
      font-family: 'Courier New', monospace;
      cursor: pointer;
      border-radius: 4px;
      font-size: 14px;
      margin-bottom: 20px;
    }
    
    .refresh-btn:hover {
      background: #00ff00;
      color: #000;
    }
    
    @media (max-width: 768px) {
      .grid { grid-template-columns: 1fr; }
      h1 { font-size: 20px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>âš¡ QRL äº¤æ˜“æ©Ÿå™¨äººç›£æ§é¢æ¿</h1>
    
    <button class="refresh-btn" onclick="location.reload()">ğŸ”„ åˆ·æ–°æ•¸æ“š</button>
    
    <!-- Market Data Section -->
    <div class="grid">
      <div class="card">
        <div class="card-title">ğŸ’¹ å¸‚å ´æ•¸æ“š</div>
        <div class="card-item">
          <div class="card-label">äº¤æ˜“å°</div>
          <div class="card-value">{{ symbol }}</div>
        </div>
        <div class="card-item">
          <div class="card-label">ç•¶å‰åƒ¹æ ¼</div>
          <div class="card-value status-good">
            {% if price != "N/A" %}{{ "%.6f"|format(price) }} USDT{% else %}N/A{% endif %}
          </div>
        </div>
        <div class="card-item">
          <div class="card-label">24å°æ™‚æ¼²è·Œ</div>
          <div class="card-value {% if change_24h >= 0 %}status-good{% else %}status-bad{% endif %}">
            {{ "%+.2f"|format(change_24h) }}%
          </div>
        </div>
        <div class="card-item">
          <div class="card-label">24å°æ™‚äº¤æ˜“é‡</div>
          <div class="card-value">{{ "%.0f"|format(volume_24h) }} USDT</div>
        </div>
      </div>
      
      <!-- Position & Risk Section -->
      <div class="card">
        <div class="card-title">ğŸ’¼ å€‰ä½èˆ‡é¢¨éšª</div>
        <div class="card-item">
          <div class="card-label">ç•¶å‰å€‰ä½</div>
          <div class="card-value">{{ position }} USDT</div>
        </div>
        <div class="card-item">
          <div class="card-label">å€‰ä½ä½¿ç”¨ç‡</div>
          <div class="progress-bar">
            <div class="progress-fill" style="width: {{ position_pct }}%">
              {{ position_pct }}%
            </div>
          </div>
        </div>
        <div class="card-item">
          <div class="card-label">æœ€å¤§å€‰ä½é™åˆ¶</div>
          <div class="card-value">{{ max_position }} USDT</div>
        </div>
        <div class="card-item">
          <div class="card-label">å¯äº¤æ˜“ç‹€æ…‹</div>
          <div class="card-value {% if can_buy %}status-good{% else %}status-warning{% endif %}">
            {% if can_buy %}âœ… å¯è²·å…¥{% else %}âš ï¸  å·²é”ä¸Šé™{% endif %}
          </div>
        </div>
      </div>
      
      <!-- Strategy Indicators Section -->
      <div class="card">
        <div class="card-title">ğŸ“Š ç­–ç•¥æŒ‡æ¨™ (EMA)</div>
        <div class="card-item">
          <div class="card-label">EMA20 (çŸ­æœŸ)</div>
          <div class="card-value">
            {% if ema20 != "N/A" %}{{ "%.6f"|format(ema20) }}{% else %}N/A{% endif %}
          </div>
        </div>
        <div class="card-item">
          <div class="card-label">EMA60 (é•·æœŸ)</div>
          <div class="card-value">
            {% if ema60 != "N/A" %}{{ "%.6f"|format(ema60) }}{% else %}N/A{% endif %}
          </div>
        </div>
        <div class="card-item">
          <div class="card-label">è¶¨å‹¢æ–¹å‘</div>
          <div class="card-value">{{ ema_trend }}</div>
        </div>
        <div class="card-item">
          <div class="card-label">åƒ¹æ ¼ç›¸å° EMA60</div>
          <div class="card-value {% if price_vs_ema60 != 'N/A' %}{% if price_vs_ema60 <= 2 %}status-good{% else %}status-warning{% endif %}{% endif %}">
            {% if price_vs_ema60 != "N/A" %}{{ "%+.2f"|format(price_vs_ema60) }}%{% else %}N/A{% endif %}
          </div>
        </div>
      </div>
      
      <!-- Trading Signal Section -->
      <div class="card">
        <div class="card-title">ğŸ¯ äº¤æ˜“ä¿¡è™Ÿ</div>
        <div class="card-item">
          <div class="card-label">è²·å…¥ä¿¡è™Ÿ</div>
          <div class="signal-box {% if buy_signal %}signal-buy{% else %}signal-hold{% endif %}">
            {% if buy_signal %}âœ… è²·å…¥æ¢ä»¶æˆç«‹{% else %}â¸ï¸  æŒå€‰è§€æœ›{% endif %}
          </div>
        </div>
        <div class="card-item" style="margin-top: 15px;">
          <div class="card-label">æ¢ä»¶æª¢æŸ¥</div>
          <div style="font-size: 12px; line-height: 1.8;">
            {% if price_vs_ema60 != "N/A" and price_vs_ema60 <= 2 %}
            âœ“ åƒ¹æ ¼æ¥è¿‘æ”¯æ’ä½ (â‰¤ EMA60 Ã— 1.02)<br>
            {% else %}
            âœ— åƒ¹æ ¼é é›¢æ”¯æ’ä½<br>
            {% endif %}
            {% if ema_trend == "ä¸Šå‡è¶¨å‹¢" %}
            âœ“ æ­£å‘å‹•èƒ½ (EMA20 â‰¥ EMA60)
            {% else %}
            âœ— è² å‘å‹•èƒ½
            {% endif %}
          </div>
        </div>
      </div>
      
      <!-- Configuration Section -->
      <div class="card">
        <div class="card-title">âš™ï¸  é…ç½®åƒæ•¸</div>
        <div class="card-item">
          <div class="card-label">å–®ç­†è¨‚å–®é‡‘é¡</div>
          <div class="card-value">{{ base_order }} USDT</div>
        </div>
        <div class="card-item">
          <div class="card-label">é™åƒ¹æŠ˜æ‰£</div>
          <div class="card-value">{{ (price_offset * 100)|int }}% ({{ price_offset }})</div>
        </div>
        <div class="card-item">
          <div class="card-label">æ™‚é–“æ¡†æ¶</div>
          <div class="card-value">1 Day</div>
        </div>
      </div>
      
      <!-- 24h Price Range Section -->
      <div class="card">
        <div class="card-title">ğŸ“ˆ 24å°æ™‚åƒ¹æ ¼å€é–“</div>
        <div class="card-item">
          <div class="card-label">æœ€é«˜åƒ¹</div>
          <div class="card-value status-good">
            {% if high_24h != "N/A" %}{{ "%.6f"|format(high_24h) }} USDT{% else %}N/A{% endif %}
          </div>
        </div>
        <div class="card-item">
          <div class="card-label">æœ€ä½åƒ¹</div>
          <div class="card-value status-bad">
            {% if low_24h != "N/A" %}{{ "%.6f"|format(low_24h) }} USDT{% else %}N/A{% endif %}
          </div>
        </div>
        <div class="card-item">
          <div class="card-label">æ³¢å‹•å¹…åº¦</div>
          <div class="card-value">
            {% if high_24h != "N/A" and low_24h != "N/A" %}
              {{ "%.2f"|format((high_24h - low_24h) / low_24h * 100) }}%
            {% else %}N/A{% endif %}
          </div>
        </div>
      </div>
    </div>
    
    <div class="footer">
      æœ€å¾Œæ›´æ–°æ™‚é–“: {{ time }} | QRL Trading Bot v1.0 | åƒ…ä¾›æ•™è‚²ç”¨é€”
    </div>
  </div>
  
  <script>
    // Auto-refresh every 60 seconds
    setTimeout(function(){ location.reload(); }, 60000);
  </script>
</body>
</html>
